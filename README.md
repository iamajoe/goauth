# goauth

```go
import "github.com/iamajoe/goauth"

auth := goauth.New(
  goauth.AuthSecrets{
    TokenAuth:          "****",
    TokenRefresh:       "****",
    TokenVerify:        "****",
    TokenResetPassword: "****",
  },
  goauth.WithUserStorage(userStorage), 
  goauth.WithTokenStorage(tokenStorage), 
)

if os.Getenv() == "development" {
  auth = auth.SetOpts(
    goauth.WithAutoVerifyUser(), 
    goauth.WithTokenExpirationTimes(goauth.AuthTokenExpirationTimes{
      Auth:          time.Now().Add(365 * 24 * time.Hour),
      Refresh:       time.Now().Add(7 * 24 * time.Hour),
      Verify:        time.Now().Add(1 * 24 * time.Hour),
      ResetPassword: time.Now().Add(1 * 24 * time.Hour),
    }), 
  )
} else {
  auth = auth.SetOpts(
    goauth.WithSender(emailSender)
  )
}
```

### Client
```go
// SignIn enters the user credentials and returns the user if succeeded.
goauth.SignIn(ctx context.Context, email string, password string) (struct{
  UserID       uuid.UUID
  AuthToken    string
  RefreshToken string
}, error)

// SignOut revokes the users token and session.
goauth.SignOut(ctx context.Context, userID uuid.UUID) error

// SignUp registers the user's email and password to the database.
goauth.SignUp(ctx context.Context, email string, password string) (uuid.UUID, error)

// SignUpVerify is to be called upon a verification email to complete the signup process
goauth.SignUpVerify(ctx context.Context, oneTimeToken string) error

// RequestResetPassword sends an email for the user to perform the reset password
goauth.RequestResetPassword(ctx context.Context, email string) error

// ResetPassword will take the token generated by RequestResetPassword and change the password
goauth.ResetPassword(ctx context.Context, oneTimeToken string, password string) error

// RefreshToken takes auth and refresh tokens and resolves a new auth token
goauth.RefreshToken(ctx context.Context, authToken string, refreshToken string) (struct{
  UserID       uuid.UUID
  AuthToken    string
  RefreshToken string
}, error)
```

### Storage

TODO: need to document and implement several storages

### Sender

TODO: need to document and implement several senders
